(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,,,function(e,t){e.exports="data:image/png;base64,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"},function(e,t,a){e.exports=a.p+"static/media/testLogo.4791f781.png"},function(e,t,a){e.exports=a(31)},,,,,,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(12),o=a.n(r),l=(a(23),a(4)),s=a(5),c=a(8),u=a(6),d=a(9),m=a(1),g=a(3),f=["user-top-read"],h=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var p=h,y=(a(11),a(7)),v=function(){var e=Object(n.useState)({winWidth:window.innerWidth,winHeight:window.innerHeight}),t=Object(y.a)(e,2),a=t[0],i=t[1],r=function(){i({winWidth:window.innerWidth,winHeight:window.innerHeight})};return Object(n.useEffect)(function(){return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[a]),a.winWidth},w=a(13);var A=a(14);function E(e,t,a,n){return[e/100*(a-n),t/100*(a-n)]}a(28),a(29);function b(e){var t=e.genres;return i.a.createElement("div",{className:"parent"},t.map(function(e){return i.a.createElement("p",{key:e,className:"genreComponent"}," ",e," ")}))}function S(e){var t=e.x,a=e.y,n=e.imageSize,r=e.axisLength,o=e.popularity,l=e.danceability,s=e.songInfo,c=e.smallFormat,u=function(e,t,a,n){var i={};for(var r in e)if(r in t){var o=E(e[r],t[r],a,n)[0],l=E(e[r],t[r],a,n)[0]+n,s=E(e[r],t[r],a,n)[1],c=E(e[r],t[r],a,n)[1]+n;i[r]=[o,l,s,c]}return i}(o,l,r,n),d=null;for(var m in u){var g=u[m][0],f=u[m][1],h=u[m][2],p=u[m][3];t>=g&&t<=f&&a>=h&&a<=p&&(d=m)}if(null!=d&&d in s){for(var y=s[d].track,v=s[d].artists,w="",A=0;A<v.length;A++)0===A?w+=v[A].name:w=w+", "+v[A].name;var S=s[d].genres,O="songInfo";return c&&(O="smallSongInfo"),i.a.createElement("div",{className:O},i.a.createElement("p",{className:"name"},i.a.createElement("strong",null," ",y," ")),i.a.createElement("p",{className:"artist"},w),i.a.createElement(b,{genres:S}))}return null}var O=i.a.memo(function(e){var t,a=e.draw,r=e.height,o=e.width,l=e.imageSize,s=e.popularity,c=e.danceability,u=e.songInfo,d=e.smallFormat,m=function(){var e=Object(n.useState)({x:0,y:0}),t=Object(y.a)(e,2),a=t[0],i=t[1];return w.isMobile?Object(n.useEffect)(function(){var e=function(e){return i({x:e.touches[0].clientX,y:e.touches[0].clientY})};return window.addEventListener("touchmove",e),window.addEventListener("touchstart",e),window.addEventListener("touchend",e),function(){window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",e),window.removeEventListener("touchend",e)}},[]):Object(n.useEffect)(function(){var e=function(e){return i({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}},[]),a}(),g=i.a.useRef(),f=Object(n.useRef)(0),h=Object(n.useRef)(0);return i.a.useEffect(function(){var e,t=g.current.getBoundingClientRect(),n=g.current.getContext("2d");g.current.width=o*devicePixelRatio,g.current.height=r*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio),g.current.style.width=o+"px",g.current.style.height=r+"px",n.beginPath(),(e=n.createLinearGradient(0,0,0,r)).addColorStop(0,"darkturquoise"),e.addColorStop(1,"greenyellow"),n.strokeStyle=e,n.lineWidth=1.5,n.moveTo(o/2,0),n.lineTo(o/2,o),n.stroke(),n.beginPath(),(e=n.createLinearGradient(0,0,o,0)).addColorStop(0,"yellow"),e.addColorStop(1,"magenta"),n.strokeStyle=e,n.moveTo(0,o/2),n.lineTo(o,o/2),n.stroke(),n.beginPath(),n.fillStyle="yellow",n.arc(5,o/2,5,0*Math.PI,2*Math.PI),n.fill(),n.beginPath(),n.fillStyle="magenta",n.arc(o-5,o/2,5,0*Math.PI,2*Math.PI),n.fill(),n.beginPath(),n.fillStyle="darkturquoise",n.arc(o/2,5,5,0*Math.PI,2*Math.PI),n.fill(),n.beginPath(),n.fillStyle="greenyellow",n.arc(o/2,o-5,5,0*Math.PI,2*Math.PI),n.fill(),a(n),f.current=t.x,h.current=t.y}),t=m.x-f.current>=o/2&&d?-100:0,i.a.createElement("div",null,i.a.createElement("canvas",{className:"canvas",ref:g,height:r,width:o}),i.a.createElement(A.a,{className:"test",visible:!0,offsetX:t,offsetY:0},i.a.createElement(S,{x:m.x-f.current,y:m.y-h.current,imageSize:l,axisLength:o,popularity:s,danceability:c,songInfo:u,smallFormat:d})))},function(){return!1});function k(e){var t=e.height,a=e.width,n=e.smallFormat,r=i.a.useRef();return i.a.useEffect(function(){var e=r.current.getContext("2d");r.current.width=a*devicePixelRatio,r.current.height=t*devicePixelRatio,e.scale(devicePixelRatio,devicePixelRatio),r.current.style.width=a+"px",r.current.style.height=t+"px";var i,o=88,l=113,s=5,c="14px",u=42,d=125;n&&(c="12px",s=4,o=70,l=95,u=37,d=98),e.beginPath(),(i=e.createLinearGradient(o,35,l-10,35)).addColorStop(0,"darkturquoise"),i.addColorStop(1,"greenyellow"),e.strokeStyle=i,e.lineWidth=1.5,e.moveTo(o,35),e.lineTo(l,35),e.stroke(),e.beginPath(),(i=e.createLinearGradient(o,15,l,15)).addColorStop(0,"yellow"),i.addColorStop(1,"magenta"),e.strokeStyle=i,e.moveTo(o,15),e.lineTo(l,15),e.stroke(),e.beginPath(),e.fillStyle="yellow",e.arc(o-s,15,s,0*Math.PI,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="magenta",e.arc(l-s,15,s,0*Math.PI,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="darkturquoise",e.arc(o-s,35,s,0*Math.PI,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="greenyellow",e.arc(l-s,35,s,0*Math.PI,2*Math.PI),e.fill(),e.fillStyle="grey",e.font=c+" Helvetica",e.fillText("underrated",0,18),e.fillStyle="grey",e.font=c+" Helvetica",e.fillText("chill",u,38),e.fillStyle="grey",e.font=c+" Helvetica",e.fillText("basic",d,18),e.fillStyle="grey",e.font=c+" Helvetica",e.fillText("hype",d,38)}),i.a.createElement("div",null,i.a.createElement("canvas",{className:"canvas",ref:r,height:t,width:a}))}var x=a(15),P=a.n(x);function N(e){var t,a,n=e.items,r=e.popularity,o=e.danceability,l=e.songDictionary,s={},c=v(),u=!1,d=!1;if(c>900?(t=.038*c,a=.4*c):c>600?(t=.05*c,a=.6*c):(t=.1*c,a=.85*c,u=!0),c<400&&(d=!0),null!==n)for(var m=0;m<n.length;m++)s[n[m].id]=n[m].album.images[0].url;var g={};return 0===s.length?i.a.createElement("p",null," Loading..."):c<250?i.a.createElement("p",{className:"sorry"},"We're sorry, your display is too small to properly view the data. Please switch to a device with a larger screen size."):i.a.createElement("div",null,i.a.createElement("div",{className:"heading"},i.a.createElement("h2",{className:"header"}," Your Music"),i.a.createElement("div",{className:"infoDiv"},i.a.createElement("img",{className:"info",src:P.a,alt:"info page"}),i.a.createElement("div",{className:"hiddenInfo"},i.a.createElement("h3",{className:"infoHeading"}," Info "),i.a.createElement("p",null,' We use the Spotify API to determine the "popularity" and "danceability" of your top 10 songs. This data is used to calculate how basic/underrated and chill/hype your songs are :) ')))),i.a.createElement(k,{className:"key",height:50,width:a,smallFormat:d}),i.a.createElement(O,{draw:function(e){if(Object.keys(g).length<=0){var n=function(){var n=new Image;n.src=s[i];var l=E(r[i],o[i],a,t);n.onload=function(){e.drawImage(n,l[0],l[1],t,t)},g[i]=n};for(var i in s)n()}else for(var i in g){var l=E(r[i],o[i],a,t);e.drawImage(g[i],l[0],l[1],t,t)}},height:a,width:a,imageSize:t,popularity:r,danceability:o,songInfo:l,smallFormat:u}))}a(30);var I=a(16),B=a.n(I),R=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={token:null,items:null,no_data:!1,danceability:{},popularity:{},songDictionary:{}},e.getTopSongs=e.getTopSongs.bind(Object(m.a)(Object(m.a)(e))),e.getAudioFeatures=e.getAudioFeatures.bind(Object(m.a)(Object(m.a)(e))),e.getPopularity=e.getPopularity.bind(Object(m.a)(Object(m.a)(e))),e.getSongInfo=e.getSongInfo.bind(Object(m.a)(Object(m.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.body.style.zoom="100%",setInterval(this.decrTime,1e3);var e=p.access_token;e&&(this.setState({token:e}),this.getTopSongs(e))}},{key:"getTopSongs",value:function(e){var t=this;g.ajax({url:"https://api.spotify.com/v1/me/top/tracks?limit=10&time_range=long_term",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(a){a?(t.setState({items:a.items,no_data:!1}),t.getAudioFeatures(e),t.getPopularity(e),t.getSongInfo(e)):window.alert("NOOOOO we couldn't get your top songs :((")}})}},{key:"getSongInfo",value:function(e){for(var t=this,a=function(){var a=t.state.items[n].id;t.state.songDictionary;t.setState({genreList:[]});var r=t.state.items[n].name,o=t.state.items[n].artists;for(i=0;i<o.length;i++){var l=o[i].id;g.ajax({url:"https://api.spotify.com/v1/artists/"+l,type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){if(e){var n=t.state.songDictionary;n[a]=a in n?{track:r,artists:o,genres:n[a].genres.concat(e.genres)}:{track:r,artists:o,genres:e.genres},t.setState({songDictionary:n})}else window.alert("NOOOOO we couldn't get your top songs :((")}})}},n=0;n<this.state.items.length;n++){var i;a()}}},{key:"getAudioFeatures",value:function(e){for(var t=this,a=function(){var a=t.state.items[n].id;g.ajax({url:"https://api.spotify.com/v1/audio-features?ids="+a,type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){if(e){var n=t.state.danceability;n[a]=[100*e.audio_features[0].danceability],t.setState({danceability:n})}else window.alert("NOOOOO we couldn't get your top songs :((")}})},n=0;n<this.state.items.length;n++)a()}},{key:"getPopularity",value:function(e){for(var t=this,a=function(){var a=t.state.items[n].id;g.ajax({url:"https://api.spotify.com/v1/tracks/"+a,type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){if(e){var n=t.state.popularity;n[a]=[e.popularity],t.setState({popularity:n})}else window.alert("NOOOOO we couldn't get your top songs :((")}})},n=0;n<this.state.items.length;n++)a()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"App-header"},!this.state.token&&i.a.createElement("div",{className:"main"},i.a.createElement("h1",{className:"title"}," plotify "),i.a.createElement("img",{className:"logo",src:B.a,alt:"logo"}),i.a.createElement("h1",{className:"divider"}," "),i.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("3a73a562c583499ea19565fc3ebc4bcc","&redirect_uri=").concat("https://plotifyapp.github.io/","&scope=").concat(f.join("%20"),"&response_type=token&show_dialog=true")},"Log in with Spotify"),i.a.createElement("p",{className:"hi"}," made with <3 by Kaily Liu and Joyce He ")),this.state.token&&!this.state.no_data&&i.a.createElement("div",null,i.a.createElement(N,{items:this.state.items,popularity:this.state.popularity,danceability:this.state.danceability,songDictionary:this.state.songDictionary})),this.state.no_data&&i.a.createElement("p",null,"NOOO it doesn't seem like we were able to retrieve your data :(")))}}]),t}(n.Component);o.a.render(i.a.createElement(R,null),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.28e76ffa.chunk.js.map